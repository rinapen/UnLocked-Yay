<div id="preJoinView">
  <div class="container menupanel">
    <header class="d-flex justify-content-between align-items-center mb-3">
      <div class="d-flex align-items-center">
        <h2 class="text-red-cyber mb-0 glitch-effect">りなぺん</h2>
      </div>
    </header>

    <main class="search-panel">

      <fieldset class="mb-4">
        <legend class="section-title">検索対象</legend>
        <div class="choice-group" id="id-type-choice">
          <div class="choice-option" data-value="user_id">ユーザーID</div>
          <div class="choice-option" data-value="conference_id">通話ID</div>
        </div>
        <input type="hidden" name="id_type" id="idTypeHidden" value="user_id" />
      </fieldset>
      
      <fieldset class="mb-4">
        <legend class="section-title">BOTタイプ</legend>
        <div class="choice-group" id="bot-type-choice">
          <div class="choice-option" data-value="fuck">潜入</div>
          <div class="choice-option" data-value="jaki">障がい者共</div>
          <div class="choice-option" data-value="bankai">卍解</div>
          <div class="choice-option" data-value="manabun">マナブン</div>
          <div class="choice-option" data-value="makino">俺様まきの様</div>
          <div class="choice-option" data-value="gojo">無量空処</div>
          <div class="choice-option" data-value="wiru">伏魔御廚子</div>
          <div class="choice-option" data-value="music">アメイジング</div>
          <div class="choice-option" data-value="shingeki">進撃のボット</div>
          <div class="choice-option" data-value="eden">エデンパチンコ</div>
          <div class="choice-option" data-value="kimetsu">鬼滅</div>
        </div>
        <input type="hidden" name="bot_type" id="botTypeHidden" />
      </fieldset>
      

      <div class="mb-3">
        <label for="idInput" class="form-label text-red-cyber">🎯 IDを入力</label>
        <input type="text" class="form-control border-red-cyber" id="idInput" placeholder="例：123456" disabled>
      </div>

      <!-- 音楽ファイルアップロード機能 -->
      <fieldset class="mb-4">
        <legend class="section-title">音楽ファイル設定</legend>
        <div class="mb-3">
          <label for="musicFile" class="form-label text-red-cyber">
            <i class="fas fa-music"></i> カスタム音楽ファイルをアップロード (音声・動画ファイル対応)
          </label>
                      <input type="file" class="form-control" id="musicFile" accept=".wav,.m4a,.mp3,.mp4,.mov,.avi,.mkv,.wmv,.flv,.webm,audio/wav,audio/m4a,audio/mp3,audio/mpeg,video/mp4,video/mov,video/quicktime,video/avi,video/mkv,video/wmv,video/flv,video/webm" />
          <div class="form-text text-light">現在のファイル: <span id="currentMusicFile">honkowa.m4a (デフォルト)</span></div>
        </div>
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-cyber border-red-cyber" id="uploadMusicBtn" disabled>
            <i class="fas fa-upload"></i> アップロード
          </button>
          <button type="button" class="btn btn-cyber border-red-cyber" id="resetMusicBtn">
            <i class="fas fa-undo"></i> デフォルトに戻す
          </button>
        </div>
      </fieldset>

      <!-- 絵文字設定 -->
      <fieldset class="mb-4">
        <legend class="section-title">絵文字設定</legend>
        <div class="emoji-setup-form">
          <div class="mb-3">
            <label for="emojiInput" class="form-label text-cyber">文字を入力</label>
            <div class="input-group">
              <input type="text" class="form-control" id="emojiInput" placeholder="絵文字・文字を入力してください（例：🔪、あいう、123）" maxlength="50">
              <button class="btn btn-outline-cyber" type="button" id="addEmojiBtn">
                <i class="fas fa-plus"></i> 追加
              </button>
            </div>
            <div class="form-text text-light">
              絵文字、ひらがな、カタカナ、数字など様々な文字を登録できます。<br>
              複数文字を入力した場合は一文字ずつ登録されます。同じ文字は重複登録されません。
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label text-cyber">現在の文字一覧 <span id="emojiCount" class="badge bg-cyber-secondary">0</span></label>
            <div class="emoji-list" id="emojiList">
              <!-- 絵文字がここに表示されます -->
            </div>
          </div>

          <!-- プリセットボタン -->
          <div class="mb-3">
            <label class="form-label text-cyber">プリセット</label>
            <div class="preset-buttons">
              <button class="btn btn-outline-cyber btn-sm me-2" data-preset="default">
                <i class="fas fa-star"></i> デフォルト
              </button>
              <button class="btn btn-outline-cyber btn-sm me-2" data-preset="weapons">
                <i class="fas fa-heart"></i> べるま
              </button>
              <button class="btn btn-outline-cyber btn-sm me-2" data-preset="animals">
                <i class="fas fa-smile"></i> かわいい
              </button>
              <button class="btn btn-outline-cyber btn-sm me-2" data-preset="clear">
                <i class="fas fa-random"></i> クリア
              </button>
            </div>
          </div>

          <!-- カスタムプリセット保存 -->
          <div class="custom-preset-save mb-3">
            <label class="form-label text-cyber">カスタムプリセット保存</label>
            <div class="input-group">
              <input type="text" class="form-control" id="presetNameInput" placeholder="プリセット名を入力" maxlength="20">
              <button class="btn btn-outline-success" type="button" id="savePresetBtn">
                <i class="fas fa-save"></i> 保存
              </button>
            </div>
            <div class="form-text text-light">現在の文字一覧をプリセットとして保存できます（最大5個まで）</div>
          </div>

          <!-- 保存されたプリセット一覧 -->
          <div class="saved-presets">
            <label class="form-label text-cyber">保存されたプリセット</label>
            <div class="custom-presets-list" id="customPresetsList">
              <!-- 保存されたプリセットがここに表示されます -->
            </div>
          </div>
        </div>
      </fieldset>

      <!-- 音量調整機能 -->
      <fieldset class="mb-4">
        <legend class="section-title">音量設定</legend>
        <div class="mb-3">
          <label for="volumeSlider" class="form-label text-red-cyber">
            <i class="fas fa-volume-up"></i> BOT音量調整
          </label>
          <div class="d-flex align-items-center gap-3">
            <i class="fas fa-volume-mute text-muted"></i>
                         <input type="range" class="form-range" id="volumeSlider" min="0" max="1000" value="1000" />
             <i class="fas fa-volume-up text-red-cyber"></i>
             <span id="volumeValue" class="text-red-cyber fw-bold">1000</span>
          </div>
          <div class="form-text text-light">BOTの音声出力音量を調整できます</div>
        </div>
      </fieldset>

      <div class="text-center mb-4">
        <button type="submit" class="btn btn-primary btn-cyber bg-red-cyber w-100" id="searchButton" disabled>
          <i class="fas fa-search"></i>検索
        </button>
      </div>

      <div id="result" class="mt-4"></div>
        <div id="fuck-bot-ui" style="display: none;" class="mt-4 text-center">
          <h4 class="mb-3 text-red-cyber">絵文字送信モード</h4>
          <div id="emoji-buttons" class="d-flex justify-content-center gap-2 flex-wrap">
            <!-- JSでボタンを追加します -->
          </div>
        </div>

        <!-- 鬼滅の刃 呼吸法UI -->
        <div id="kimetsu-bot-ui" style="display: none;" class="mt-4">
          <h4 class="mb-3 text-red-cyber text-center">鬼滅の刃 呼吸法モード</h4>
          
          <!-- 呼吸法選択ボタン -->
          <div class="breathing-selection mb-4">
            <h5 class="text-red-cyber mb-3">呼吸法を選択してください</h5>
            <div class="breathing-buttons d-flex flex-wrap justify-content-center gap-2">
              <button class="breathing-btn water-breathing" data-breathing="water">💧 水の呼吸</button>
              <button class="breathing-btn fire-breathing" data-breathing="fire">🔥 炎の呼吸</button>
              <button class="breathing-btn wind-breathing" data-breathing="wind">🌪️ 風の呼吸</button>
              <button class="breathing-btn stone-breathing" data-breathing="stone">🗿 岩の呼吸</button>
              <button class="breathing-btn thunder-breathing" data-breathing="thunder">⚡ 雷の呼吸</button>
              <button class="breathing-btn mist-breathing" data-breathing="mist">🌫️ 霞の呼吸</button>
              <button class="breathing-btn flower-breathing" data-breathing="flower">🌸 花の呼吸</button>
              <button class="breathing-btn snake-breathing" data-breathing="snake">🐍 蛇の呼吸</button>
              <button class="breathing-btn love-breathing" data-breathing="love">💕 恋の呼吸</button>
              <button class="breathing-btn beast-breathing" data-breathing="beast">🐺 獣の呼吸</button>
              <button class="breathing-btn sound-breathing" data-breathing="sound">🎵 音の呼吸</button>
              <button class="breathing-btn moon-breathing" data-breathing="moon">🌙 月の呼吸</button>
              <button class="breathing-btn sun-breathing" data-breathing="sun">☀️ 日の呼吸</button>
            </div>
          </div>

          <!-- 技選択ボタン -->
          <div id="technique-selection" style="display: none;">
            <h5 class="text-red-cyber mb-3" id="selected-breathing-title">選択された呼吸法</h5>
            <div id="technique-buttons" class="d-flex flex-wrap justify-content-center gap-2">
              <!-- JSで技ボタンを追加します -->
            </div>
            <button class="btn btn-cyber border-red-cyber mt-3" id="back-to-breathing">← 呼吸法選択に戻る</button>
          </div>
        </div>

    </main>
  </div>
</div>